{
  "rag_config": {
    "version": "2.1",
    "chapitre": "Chapitre 2 - IBA, IRCM, IRF, ITS",
    "code": "CGI Congo 2026",
    "last_updated": "2026-01-04",
    "base_juridique": "Directive CEMAC n°0119/25-UEAC-177-CM-42"
  },
  "chunking_strategy": {
    "method": "semantic_hierarchical",
    "description": "Découpage par impôt et sous-thème avec préservation hiérarchique",
    "parameters": {
      "primary_split": "article",
      "secondary_split": "alinea_ou_tiret",
      "max_chunk_tokens": 800,
      "min_chunk_tokens": 100,
      "overlap_tokens": 50,
      "preserve_structure": true,
      "include_parent_context": true
    },
    "regroupements_recommandes": [
      {
        "groupe": "iba_champ_application",
        "articles": ["Art. 93", "Art. 93A", "Art. 93B", "Art. 93C"],
        "raison": "Champ d'application complet et territorialité de l'IBA"
      },
      {
        "groupe": "iba_benefice_imposable",
        "articles": ["Art. 94", "Art. 94A", "Art. 94B"],
        "raison": "Détermination du bénéfice imposable et charges"
      },
      {
        "groupe": "iba_modalites",
        "articles": ["Art. 95", "Art. 95A", "Art. 95B"],
        "raison": "Taux, minimum de perception et cas particuliers"
      },
      {
        "groupe": "regime_forfait_complet",
        "articles": ["Art. 96", "Art. 96A", "Art. 97", "Art. 98", "Art. 99", "Art. 100", "Art. 101"],
        "raison": "Régime forfaitaire - obligations et sanctions"
      },
      {
        "groupe": "regime_reel_complet",
        "articles": ["Art. 102", "Art. 103", "Art. 104"],
        "raison": "Régime réel et obligations comptables OHADA"
      },
      {
        "groupe": "ircm_champ_revenus",
        "articles": ["Art. 105", "Art. 105A", "Art. 105B", "Art. 105C", "Art. 105D", "Art. 105E"],
        "raison": "Types de revenus IRCM complet"
      },
      {
        "groupe": "ircm_modalites",
        "articles": ["Art. 106", "Art. 107", "Art. 108", "Art. 109", "Art. 110", "Art. 110A"],
        "raison": "Exonérations, territorialité et taux IRCM"
      },
      {
        "groupe": "irf_champ_complet",
        "articles": ["Art. 111", "Art. 111A", "Art. 111B", "Art. 111C", "Art. 111D", "Art. 111E"],
        "raison": "Champ IRF incluant plus-values immobilières"
      },
      {
        "groupe": "irf_modalites",
        "articles": ["Art. 112", "Art. 112A", "Art. 112B", "Art. 113", "Art. 113A"],
        "raison": "Base, taux et retenue IRF"
      },
      {
        "groupe": "its_champ_exonerations",
        "articles": ["Art. 114", "Art. 114A", "Art. 114B", "Art. 114C", "Art. 114D", "Art. 114E"],
        "raison": "Champ ITS, exonérations et territorialité"
      },
      {
        "groupe": "its_base_bareme",
        "articles": ["Art. 115", "Art. 116", "Art. 116A"],
        "raison": "Base imposable, avantages en nature et barème"
      }
    ]
  },
  "metadata_enrichment": {
    "per_chunk_metadata": {
      "article_id": "identifiant unique",
      "titre_article": "titre officiel",
      "section": "section du chapitre",
      "impot_concerne": "IBA | IRCM | IRF | ITS | FORFAIT | REEL",
      "mots_cles": "liste mots-clés",
      "mots_cles_enrichis": "synonymes et variations",
      "valeurs_numeriques": "taux, seuils, délais",
      "references_croisees": "articles liés",
      "theme_principal": "thème",
      "themes_secondaires": "thèmes associés",
      "type_disposition": "champ | assiette | taux | exonération | obligation | sanction | calcul",
      "applicable_a": "tous | entrepreneurs | salariés | propriétaires | investisseurs | forfaitaires | réel"
    }
  },
  "embedding_optimization": {
    "model_recommande": "text-embedding-3-large",
    "dimensions": 1536,
    "preprocessing": {
      "normalisation_juridique": true,
      "expansion_acronymes": {
        "IBA": "Impôt sur les Bénéfices d'Affaires",
        "IRCM": "Impôt sur le Revenu des Capitaux Mobiliers",
        "IRF": "Impôt sur les Revenus Fonciers",
        "ITS": "Impôt sur les Traitements et Salaires",
        "BIC": "Bénéfices Industriels et Commerciaux",
        "BNC": "Bénéfices Non Commerciaux",
        "BA": "Bénéfices Agricoles",
        "IS": "Impôt sur les Sociétés",
        "TVA": "Taxe sur la Valeur Ajoutée",
        "SMT": "Système Minimal de Trésorerie",
        "SYSCOHADA": "Système Comptable OHADA",
        "OHADA": "Organisation pour l'Harmonisation en Afrique du Droit des Affaires",
        "CEMAC": "Communauté Économique et Monétaire de l'Afrique Centrale",
        "BEAC": "Banque des États de l'Afrique Centrale",
        "CA": "Chiffre d'Affaires",
        "CAC": "Commissaire Aux Comptes",
        "SMIG": "Salaire Minimum Interprofessionnel Garanti",
        "SS": "Sécurité Sociale",
        "RAS": "Retenue À la Source",
        "AG": "Assemblée Générale",
        "SNC": "Société en Nom Collectif",
        "SCS": "Société en Commandite Simple",
        "PP": "Personne Physique",
        "PM": "Personne Morale"
      },
      "normalisation_montants": {
        "FCFA": "francs CFA",
        "F CFA": "francs CFA",
        "millions": "000.000"
      },
      "normalisation_pourcentages": {
        "‰": "pour mille",
        "pour cent": "%",
        "pourcent": "%"
      }
    }
  },
  "retrieval_config": {
    "strategie": "hybrid",
    "parametres": {
      "semantic_weight": 0.6,
      "keyword_weight": 0.4,
      "top_k": 10,
      "rerank": true,
      "rerank_model": "cross-encoder",
      "diversity_factor": 0.3
    },
    "filtres_contextuels": {
      "par_impot": true,
      "par_theme": true,
      "par_applicable_a": true,
      "par_type_question": {
        "taux_iba": ["Art. 95"],
        "taux_ircm": ["Art. 110"],
        "taux_irf": ["Art. 113"],
        "taux_its": ["Art. 116"],
        "exonerations_ircm": ["Art. 106"],
        "exonerations_irf": ["Art. 111C"],
        "exonerations_its": ["Art. 114A", "Art. 114B"],
        "territorialite_iba": ["Art. 93B", "Art. 93C"],
        "territorialite_ircm": ["Art. 107"],
        "territorialite_irf": ["Art. 111D"],
        "territorialite_its": ["Art. 114D"],
        "avantages_nature": ["Art. 115"],
        "bareme_its": ["Art. 116"],
        "regime_forfait": ["Art. 96", "Art. 96A", "Art. 97", "Art. 98", "Art. 99"],
        "regime_reel": ["Art. 102", "Art. 103", "Art. 104"],
        "obligations": ["Art. 96A", "Art. 104", "Art. 116A"],
        "sanctions": ["Art. 98", "Art. 99", "Art. 103"],
        "plus_values_mobilieres": ["Art. 105E", "Art. 107", "Art. 109", "Art. 110A"],
        "plus_values_immobilieres": ["Art. 111B", "Art. 112A", "Art. 113"],
        "dividendes": ["Art. 105A", "Art. 108", "Art. 110"],
        "loyers": ["Art. 111", "Art. 112", "Art. 113A"],
        "residence_fiscale": ["Art. 93B", "Art. 114D"]
      }
    },
    "boost_factors": {
      "article_contient_taux": 1.2,
      "article_contient_bareme": 1.3,
      "article_principal_impot": 1.2
    }
  },
  "query_expansion": {
    "synonymes_automatiques": true,
    "mappings_impots": {
      "dividendes": "IRCM",
      "actions": "IRCM",
      "obligations": "IRCM",
      "intérêts": "IRCM",
      "comptes courants": "IRCM",
      "loyers": "IRF",
      "immeubles": "IRF",
      "propriété": "IRF",
      "foncier": "IRF",
      "salaires": "ITS",
      "traitements": "ITS",
      "pensions": "ITS",
      "rémunérations": "ITS",
      "avantages en nature": "ITS",
      "entrepreneur": "IBA",
      "profession libérale": "IBA",
      "commerçant": "IBA",
      "artisan": "IBA",
      "agriculteur": "IBA",
      "forfait": "IBA",
      "réel": "IBA"
    },
    "variations_orthographiques": {
      "bénéfice": ["benefice", "profit", "résultat", "gain"],
      "salaire": ["salaires", "traitement", "rémunération", "paie"],
      "dividende": ["dividendes", "distribution", "bénéfice distribué"],
      "loyer": ["loyers", "revenus locatifs", "location"],
      "impôt": ["impot", "taxe", "imposition"],
      "exonération": ["exoneration", "exonéré", "exempt", "dispense"],
      "déductible": ["deductible", "déduction", "déduire"]
    },
    "questions_types": {
      "taux_patterns": ["quel est le taux", "taux de", "pourcentage", "combien", "à quel taux"],
      "exoneration_patterns": ["exonéré", "exonération", "affranchi", "dispense", "exempt"],
      "obligation_patterns": ["doit", "obligé", "obligation", "tenir", "déclarer", "faut-il"],
      "delai_patterns": ["délai", "quand", "date limite", "combien de temps", "échéance"],
      "bareme_patterns": ["barème", "tranches", "progressif", "calcul ITS"],
      "avantage_patterns": ["avantage en nature", "logement", "voiture", "nourriture", "évaluation"]
    }
  },
  "intent_detection": {
    "categories": {
      "identification_impot": {
        "patterns": ["quel impôt", "suis-je soumis", "dois-je payer", "comment suis-je imposé"],
        "strategy": "classification_first",
        "top_k": 5
      },
      "taux_applicable": {
        "patterns": ["quel taux", "combien", "montant", "pourcentage"],
        "strategy": "precise_search",
        "top_k": 3,
        "boost_numeric": true
      },
      "exoneration": {
        "patterns": ["exonéré", "dispense", "pas d'impôt", "affranchi"],
        "strategy": "condition_search",
        "top_k": 5
      },
      "calcul": {
        "patterns": ["comment calculer", "formule", "base", "assiette"],
        "strategy": "formula_search",
        "top_k": 5
      },
      "obligation_declaration": {
        "patterns": ["dois-je déclarer", "obligation", "quand", "comment"],
        "strategy": "procedural_search",
        "top_k": 5
      },
      "comparaison_regimes": {
        "patterns": ["différence", "forfait ou réel", "quel régime", "mieux"],
        "strategy": "multi_search",
        "top_k": 8
      }
    }
  },
  "quality_metrics": {
    "cibles": {
      "precision_at_5": 0.92,
      "recall_at_10": 0.97,
      "mrr": 0.88,
      "ndcg_at_10": 0.92
    },
    "tests_validation": {
      "fichier": "cgi_2026_chapitre2_tests.json",
      "nombre_questions": 60,
      "seuil_reussite": 0.92
    }
  },
  "prompt_templates": {
    "system": "Tu es un expert en fiscalité congolaise, spécialiste du CGI 2026. Tu réponds aux questions sur l'imposition des personnes physiques (IBA, IRCM, IRF, ITS) en citant précisément les articles. Tu identifies d'abord l'impôt concerné avant de répondre. Tu distingues clairement les différents impôts et leurs régimes (forfait/réel).",
    "context_prefix": "Voici les dispositions pertinentes du CGI Congo 2026 (Chapitre 2 - Imposition des personnes physiques) :",
    "answer_format": {
      "structure": [
        "Identification de l'impôt concerné (IBA/IRCM/IRF/ITS)",
        "Réponse directe à la question",
        "Article(s) de référence avec citation exacte",
        "Valeurs chiffrées (taux, seuils, délais, barème)",
        "Conditions d'application si pertinent"
      ],
      "style": "professionnel_pedagogique"
    },
    "fallback": "Je n'ai pas trouvé d'information précise dans le CGI 2026 pour répondre à cette question. Précisez si votre question concerne l'IBA (entrepreneurs), l'IRCM (revenus mobiliers), l'IRF (revenus fonciers) ou l'ITS (salaires).",
    "disambiguation": "Votre question peut concerner plusieurs impôts. Pouvez-vous préciser : s'agit-il de revenus d'activité (IBA), de placements (IRCM), de biens immobiliers (IRF) ou de salaires (ITS) ?"
  },
  "response_templates": {
    "taux": {
      "template": "**Impôt concerné** : {impot}\n\nLe taux applicable est de **{taux}** selon l'article {article}.\n\n**Base de calcul** : {base}\n\n**Conditions** : {conditions}",
      "required_fields": ["impot", "taux", "article", "base"]
    },
    "bareme_its": {
      "template": "**Barème ITS (Art. 116)**\n\n| Tranche | Taux |\n|---------|------|\n| 0 - 615 000 | 1 200 FCFA (forfait) |\n| 615 001 - 1 500 000 | 10% |\n| 1 500 001 - 3 500 000 | 15% |\n| 3 500 001 - 5 000 000 | 20% |\n| > 5 000 000 | 30% |\n\n**Note** : Pas de réduction pour charge de famille.",
      "required_fields": []
    },
    "avantages_nature": {
      "template": "**Évaluation des avantages en nature (Art. 115)**\n\n| Avantage | Taux |\n|----------|------|\n| Logement | 20% salaire plafonné SS |\n| Voiture | 3% salaire brut |\n| Nourriture | 20% salaire brut |\n| Domesticité | 7% salaire brut |\n| Eau/Éclairage/Gaz | 5% chacun |\n| Téléphone | 2% salaire brut |",
      "required_fields": []
    },
    "regime_comparaison": {
      "template": "**Comparaison Forfait vs Réel**\n\n| Critère | Forfait | Réel |\n|---------|---------|------|\n| Seuil CA | < seuil TVA | ≥ seuil TVA |\n| Comptabilité | SMT | SYSCOHADA |\n| Option | Possible vers réel | - |\n| Durée option | 3 ans irrévocable | - |",
      "required_fields": []
    }
  },
  "error_handling": {
    "no_results": {
      "action": "identify_impot_first",
      "fallback_message": "Précisez le type de revenu concerné : activité professionnelle (IBA), placements financiers (IRCM), immobilier (IRF), ou salaire (ITS)."
    },
    "ambiguous_query": {
      "action": "request_clarification",
      "clarification_options": ["IBA - Entrepreneurs/professions libérales", "IRCM - Dividendes/intérêts", "IRF - Loyers/immobilier", "ITS - Salaires/pensions"]
    },
    "multiple_impots": {
      "action": "present_all_relevant",
      "summary_prompt": "Votre situation peut impliquer plusieurs impôts :"
    }
  }
}
